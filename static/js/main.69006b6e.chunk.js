(this["webpackJsonpdouble-color-reversi"]=this["webpackJsonpdouble-color-reversi"]||[]).push([[0],{11:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t);var r=n(1),l=n.n(r),c=n(5),o=n.n(c),a=(n(11),n(2)),i=(n(3),n(0));function s(e){return Object(i.jsx)("div",{className:"stoneElement ".concat(e.className),style:{background:e.color},children:e.value})}function u(e){var t=function(){if(null===e.color)return null;var t,n=e.value<=1?null:Object(i.jsx)("span",{style:{color:(t=e.color,"#"!==t[0]||(299*parseInt(t.substr(1,2),16)+587*parseInt(t.substr(3,2),16)+114*parseInt(t.substr(5,2),16))/1e3<128?"white":"black")},children:"+"+(e.value-1).toString()});return Object(i.jsx)(s,{color:e.color,value:n})}();return Object(i.jsx)("div",{style:{width:e.size,height:e.size,backgroundColor:e.isSettable?"#ffa399":"transparent"},className:"stoneFrame",onClick:function(){return e.onClick()},children:t})}function j(e){var t=function(t,n){for(var r,l=!1,c=0;c<e.settablePositions.length;c++)if(e.settablePositions[c].row===t.row&&e.settablePositions[c].col===t.col){l=!0;break}return r=null===n.color&&l?function(){return e.setStone(t)}:function(){},Object(i.jsx)(u,{size:(100/e.size).toString()+"%",color:n.color,value:n.value,isSettable:l,onClick:r},t.row.toString()+t.col.toString())},n=function(n){for(var r=[],l=0;l<e.size;l++){var c=t({row:n,col:l},e.data[n][l]);r.push(c)}return r},r=function(){for(var t=[],r=0;r<e.size;r++)t=t.concat(n(r));return Object(i.jsx)("div",{className:"field",children:t})}();return Object(i.jsx)("div",{className:"fieldWrapper",children:r})}function f(e){return Object(i.jsxs)("div",{children:[Object(i.jsx)("input",{type:"color",value:e.defaultColor,onChange:function(t){return function(t){e.setState(t.target.value)}(t)}}),Object(i.jsx)("input",{type:"file",accept:"image/*",onChange:function(t){return function(t){var n=t.target.files[0],r=new FileReader;r.addEventListener("load",(function(){e.setState("url(".concat(r.result,")"))})),r.readAsDataURL(n)}(t)}})]})}function v(e){return Object(i.jsxs)("div",{style:{visibility:e.visible?"visible":"hidden",opacity:e.visible?1:0},children:[Object(i.jsxs)("div",{className:"dialogInner",children:[Object(i.jsx)("button",{className:"dialogCloseButton",type:"button",onClick:function(){return e.closeDialog()},children:"\xd7"}),e.children]}),Object(i.jsx)("div",{className:"fullScreen dialogOuter",onClick:function(){return e.closeDialog()}})]})}var b=n(15),d=n(16),O=function(e,t){var n=function(e){return JSON.parse(JSON.stringify(Array(e).fill(Array(e).fill({color:null,value:0}))))}(e),r=e/2-2,l=e/2-2;return n[r][l]={color:t[0],value:1},n[r][l+1]={color:t[1],value:1},n[r][l+2]={color:t[2],value:1},n[r][l+3]={color:t[3],value:1},n[r+1][l]={color:t[1],value:1},n[r+1][l+1]={color:t[0],value:1},n[r+1][l+2]={color:t[3],value:1},n[r+1][l+3]={color:t[2],value:1},n[r+2][l]={color:t[2],value:1},n[r+2][l+1]={color:t[3],value:1},n[r+2][l+2]={color:t[0],value:1},n[r+2][l+3]={color:t[1],value:1},n[r+3][l]={color:t[3],value:1},n[r+3][l+1]={color:t[2],value:1},n[r+3][l+2]={color:t[1],value:1},n[r+3][l+3]={color:t[0],value:1},n};function h(){var e=Object(r.useState)(!1),t=Object(a.a)(e,2),n=t[0],l=t[1],c=Object(r.useState)(!1),o=Object(a.a)(c,2),u=o[0],h=o[1],x=Object(r.useState)(10),p=Object(a.a)(x,2),g=p[0],m=p[1],S=Object(r.useState)(["player1","player2"]),N=Object(a.a)(S,2),y=N[0],w=N[1],C=Object(r.useState)(["#000000","#ff0000","#0000ff","#008000"]),k=Object(a.a)(C,2),I=k[0],J=k[1],P=Object(r.useState)(0),z=Object(a.a)(P,2),F=z[0],D=z[1],M=Object(r.useState)(null),L=Object(a.a)(M,2),E=L[0],T=L[1],B=Object(r.useState)([0,0]),A=Object(a.a)(B,2),R=A[0],W=A[1],U=Object(r.useState)([]),q=Object(a.a)(U,2),G=q[0],H=q[1],K=Object(r.useState)(!1),Q=Object(a.a)(K,2),V=Q[0],X=Q[1],Y=function(e,t){var n=JSON.parse(JSON.stringify(I));n[t]=e,J(n)},Z=function(e){switch(e.target.name){case"player0":w([e.target.value,y[1]]);break;case"player1":var t=parseInt(e.target.value);"size"!==y[0]||isNaN(t)||t>=4&&t<=100&&m(t),w([y[0],e.target.value])}},$=function(e){for(var t=[],n=0;n<g;n++)for(var r=0;r<g;r++){var l={row:n,col:r};null===E[l.row][l.col].color&&0!=te(l,e)&&t.push(l)}return t},_=function(e,t,n){var r=e.slice(),l=r[t.row][t.col];return l.color=n,r[t.row][t.col]=l,r},ee=function(e,t,n){var r=e.slice(),l=r[t.row][t.col];return l.value=l.value+n,r[t.row][t.col]=l,r},te=function(e,t){for(var n=[[1,0],[0,1],[1,1],[-1,1]],r=[JSON.parse(JSON.stringify(e))],l=0;l<n.length;l++)for(var c=-1;c<=1;c+=2){var o=JSON.parse(JSON.stringify(e)),a=[],i=!1;for(o.row+=c*n[l][0],o.col+=c*n[l][1];o.row>=0&&o.row<g&&o.col>=0&&o.col<g&&null!==E[o.row][o.col].color;){if(E[o.row][o.col].color===t){i=!0;break}a.push(JSON.parse(JSON.stringify(o))),o.row+=c*n[l][0],o.col+=c*n[l][1]}i&&(r=r.concat(a))}return r.length<=1&&(r=[]),r},ne=function(){var e,t,n=JSON.parse(JSON.stringify(I));0===(e=1,t=2,e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)%2)&&(n=[I[1],I[0],I[3],I[2]],w([y[1],y[0]]),J(n)),T(O(g,n)),l(!0)};Object(r.useEffect)((function(){if(null!==E){W(function(){for(var e=[0,0],t=0;t<E.length;t++)for(var n=0;n<E[t].length;n++)for(var r=0;r<I.length;r++)if(E[t][n].color===I[r]){e[r%2]+=Math.pow(E[t][n].value,2);break}return e}());var e=$(I[F%4]);0==e?(e=$(I[(F+1)%4]),H(e),re()):H(e)}}),[E,F]);var re=function e(){!function(){for(var e=0;e<E.length;e++)for(var t=0;t<E[e].length;t++)if(null===E[e][t].color)return!1;return!0}()?0!=G?D(F+1):e():le()},le=function(){h(!0),X(!0)};return Object(i.jsx)("div",{children:n?Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:"player1Info playerInfo"+(F%2===0?" turnPlayer":""),children:[Object(i.jsx)("div",{className:"infoStoneFrame",children:Object(i.jsx)(s,{className:"infoStone",color:F%2===0?I[(0+F)%4]:I[(0+(F+1))%4],value:null})}),Object(i.jsx)("div",{className:"nextInfoStoneFrame",children:Object(i.jsx)(s,{className:"infoStone",color:F%2===0?I[(2+F)%4]:I[(2+(F+1))%4],value:null})}),Object(i.jsx)("div",{className:"playerInfoName",children:Object(i.jsx)("span",{children:y[0]})}),Object(i.jsx)("div",{className:"playerInfoPoint",children:R[0]})]}),Object(i.jsxs)("div",{className:"player2Info playerInfo"+(F%2!==0?" turnPlayer":""),children:[Object(i.jsx)("div",{className:"infoStoneFrame",children:Object(i.jsx)(s,{className:"infoStone",color:F%2===0?I[(1+F)%4]:I[(F-1+1)%4],value:null})}),Object(i.jsx)("div",{className:"nextInfoStoneFrame",children:Object(i.jsx)(s,{className:"infoStone",color:F%2===0?I[(3+F)%4]:I[(F-1+3)%4],value:null})}),Object(i.jsx)("div",{className:"playerInfoName",children:Object(i.jsx)("span",{children:y[1]})}),Object(i.jsx)("div",{className:"playerInfoPoint",children:R[1]})]}),Object(i.jsx)(j,{data:E,size:g,setStone:u?function(){}:function(e){if(null===E[e.row][e.col].color){var t=te(e,I[F%4]);if(0!=t){var n=E.slice();n=function(e,t,n){var r=e.slice();return t.forEach((function(e){if(r[e.row][e.col].color!==n){if(null===r[e.row][e.col].color)return r=_(r,e,n),r=ee(r,e,1);for(var t=null,l=0;l<I.length;l++)r[e.row][e.col].color===I[l]&&(t=l);null!==t&&(F%2===t%2?(r=_(r,e,n),r=ee(r,e,1)):r=r[e.row][e.col].value>=2?ee(r,e,-1):_(r,e,n))}})),r}(n,t,I[F%4]),T(n),re()}}},settablePositions:G}),u?Object(i.jsx)("div",{className:"resultOpenButton",onClick:function(){return X(!0)},children:"result"}):null,Object(i.jsx)(v,{visible:V,closeDialog:function(){return X(!1)},children:Object(i.jsxs)("div",{className:"resultDialog",children:[Object(i.jsx)("div",{className:"resultTitle",children:R[0]===R[1]?"Draw!":(R[0]>R[1]?y[0]:y[1])+" Win!"}),Object(i.jsxs)("div",{className:"resultPoints",children:[R[0]," \u5bfe ",R[1]]}),Object(i.jsx)("div",{children:Object(i.jsx)(b.a,{url:"https://reversi.fazerog02.dev",title:R[0]-R[1]===0?"4\u8272\u30ea\u30d0\u30fc\u30b7\u3067\u5f15\u304d\u5206\u3051\u307e\u3057\u305f\uff01":"".concat(Math.abs(R[0]-R[1]),"\u70b9\u5dee\u30674\u8272\u30ea\u30d0\u30fc\u30b7\u3067\u52dd\u5229\u3057\u307e\u3057\u305f\uff01"),children:Object(i.jsx)(d.a,{size:64,round:!0})})})]})})]}):Object(i.jsxs)("div",{className:"gameInit",children:[Object(i.jsx)("div",{className:"gameTitle",children:"4\u8272\u30ea\u30d0\u30fc\u30b7"}),Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{style:{display:"inline-block",marginRight:"30px"},children:[Object(i.jsx)("input",{name:"player0",type:"text",value:y[0],onChange:function(e){return Z(e)}}),Object(i.jsx)("p",{children:"\u82721"}),Object(i.jsx)(f,{defaultColor:I[0],setState:function(e){I.includes(e)||Y(e,0)}}),Object(i.jsx)("p",{children:"\u82722"}),Object(i.jsx)(f,{defaultColor:I[2],setState:function(e){I.includes(e)||Y(e,2)}})]}),Object(i.jsxs)("div",{style:{display:"inline-block",marginLeft:"30px"},children:[Object(i.jsx)("input",{name:"player1",type:"text",value:y[1],onChange:function(e){return Z(e)}}),Object(i.jsx)("p",{children:"\u82721"}),Object(i.jsx)(f,{defaultColor:I[1],setState:function(e){I.includes(e)||Y(e,1)}}),Object(i.jsx)("p",{children:"\u82722"}),Object(i.jsx)(f,{defaultColor:I[3],setState:function(e){I.includes(e)||Y(e,3)}})]}),Object(i.jsx)("div",{style:{marginTop:"50px"},children:Object(i.jsx)("button",{style:{width:"80%",marginLeft:"10%"},type:"button",onClick:function(){return ne()},children:"start"})})]})]})})}var x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,r=t.getFID,l=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),l(e),c(e),o(e)}))};o.a.render(Object(i.jsx)(l.a.StrictMode,{children:Object(i.jsx)(h,{})}),document.getElementById("root")),x()},3:function(e,t,n){}},[[13,1,2]]]);
//# sourceMappingURL=main.69006b6e.chunk.js.map