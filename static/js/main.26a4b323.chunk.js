(this["webpackJsonpdouble-color-reversi"]=this["webpackJsonpdouble-color-reversi"]||[]).push([[0],{11:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t);var l=n(1),r=n.n(l),c=n(5),o=n.n(c),a=(n(11),n(2)),i=(n(3),n(0));function s(e){return Object(i.jsx)("div",{className:"stoneElement ".concat(e.className),style:{background:e.color},children:e.value})}function u(e){var t=function(){if(null===e.color)return null;var t,n=e.value<=1?null:Object(i.jsx)("span",{style:{color:(t=e.color,"#"!==t[0]||(299*parseInt(t.substr(1,2),16)+587*parseInt(t.substr(3,2),16)+114*parseInt(t.substr(5,2),16))/1e3<128?"white":"black")},children:"+"+(e.value-1).toString()});return Object(i.jsx)(s,{color:e.color,value:n})}();return Object(i.jsx)("div",{style:{width:e.size,height:"100%",backgroundColor:e.isSettable?"#ffa399":"transparent"},className:"stoneFrame",onClick:function(){return e.onClick()},children:t})}function j(e){var t=function(t,n){for(var l,r=!1,c=0;c<e.settablePositions.length;c++)if(e.settablePositions[c].row===t.row&&e.settablePositions[c].col===t.col){r=!0;break}return l=null===n.color&&r?function(){return e.setStone(t)}:function(){},Object(i.jsx)(u,{size:(100/e.size).toString()+"%",color:n.color,value:n.value,isSettable:r,onClick:l},t.row.toString()+t.col.toString())},n=function(n){for(var l=[],r=0;r<e.size;r++){var c=t({row:n,col:r},e.data[n][r]);l.push(c)}return Object(i.jsx)("div",{className:"fieldLine",style:{height:100/e.size+"%"},children:l},n.toString())},l=function(){for(var t=[],l=0;l<e.size;l++)t.push(n(l));return Object(i.jsx)("div",{className:"field",children:t})}();return Object(i.jsx)("div",{className:"fieldWrapper",children:l})}function f(e){return Object(i.jsxs)("div",{children:[Object(i.jsx)("input",{type:"color",value:e.defaultColor,onChange:function(t){return function(t){e.setState(t.target.value)}(t)}}),Object(i.jsx)("input",{type:"file",accept:"image/*",onChange:function(t){return function(t){var n=t.target.files[0],l=new FileReader;l.addEventListener("load",(function(){e.setState("url(".concat(l.result,")"))})),l.readAsDataURL(n)}(t)}})]})}function b(e){return Object(i.jsxs)("div",{style:{visibility:e.visible?"visible":"hidden",opacity:e.visible?1:0},children:[Object(i.jsxs)("div",{className:"dialogInner",children:[Object(i.jsx)("button",{className:"dialogCloseButton",type:"button",onClick:function(){return e.closeDialog()},children:"\xd7"}),e.children]}),Object(i.jsx)("div",{className:"fullScreen dialogOuter",onClick:function(){return e.closeDialog()}})]})}var v=n(15),d=n(16),O=function(e,t){var n=function(e){return JSON.parse(JSON.stringify(Array(e).fill(Array(e).fill({color:null,value:0}))))}(e),l=e/2-2,r=e/2-2;return n[l][r]={color:t[0],value:1},n[l][r+1]={color:t[1],value:1},n[l][r+2]={color:t[2],value:1},n[l][r+3]={color:t[3],value:1},n[l+1][r]={color:t[1],value:1},n[l+1][r+1]={color:t[0],value:1},n[l+1][r+2]={color:t[3],value:1},n[l+1][r+3]={color:t[2],value:1},n[l+2][r]={color:t[2],value:1},n[l+2][r+1]={color:t[3],value:1},n[l+2][r+2]={color:t[0],value:1},n[l+2][r+3]={color:t[1],value:1},n[l+3][r]={color:t[3],value:1},n[l+3][r+1]={color:t[2],value:1},n[l+3][r+2]={color:t[1],value:1},n[l+3][r+3]={color:t[0],value:1},n};function h(){var e=Object(l.useState)(!1),t=Object(a.a)(e,2),n=t[0],r=t[1],c=Object(l.useState)(!1),o=Object(a.a)(c,2),u=o[0],h=o[1],x=Object(l.useState)(10),p=Object(a.a)(x,2),g=p[0],S=p[1],y=Object(l.useState)(["player1","player2"]),N=Object(a.a)(y,2),m=N[0],w=N[1],C=Object(l.useState)(["#000000","#ff0000","#0000ff","#008000"]),k=Object(a.a)(C,2),I=k[0],J=k[1],P=Object(l.useState)(0),z=Object(a.a)(P,2),F=z[0],D=z[1],M=Object(l.useState)(null),E=Object(a.a)(M,2),L=E[0],B=E[1],A=Object(l.useState)([0,0]),T=Object(a.a)(A,2),R=T[0],W=T[1],U=Object(l.useState)([]),q=Object(a.a)(U,2),G=q[0],H=q[1],K=Object(l.useState)(!1),Q=Object(a.a)(K,2),V=Q[0],X=Q[1],Y=function(e,t){var n=JSON.parse(JSON.stringify(I));n[t]=e,J(n)},Z=function(e){switch(e.target.name){case"player0":w([e.target.value,m[1]]);break;case"player1":var t=parseInt(e.target.value);"size"!==m[0]||isNaN(t)||t>=4&&t<=100&&S(t),w([m[0],e.target.value])}},$=function(e){for(var t=[],n=0;n<g;n++)for(var l=0;l<g;l++){var r={row:n,col:l};null===L[r.row][r.col].color&&0!=te(r,e)&&t.push(r)}return t},_=function(e,t,n){var l=e.slice(),r=l[t.row][t.col];return r.color=n,l[t.row][t.col]=r,l},ee=function(e,t,n){var l=e.slice(),r=l[t.row][t.col];return r.value=r.value+n,l[t.row][t.col]=r,l},te=function(e,t){for(var n=[[1,0],[0,1],[1,1],[-1,1]],l=[JSON.parse(JSON.stringify(e))],r=0;r<n.length;r++)for(var c=-1;c<=1;c+=2){var o=JSON.parse(JSON.stringify(e)),a=[],i=!1;for(o.row+=c*n[r][0],o.col+=c*n[r][1];o.row>=0&&o.row<g&&o.col>=0&&o.col<g&&null!==L[o.row][o.col].color;){if(L[o.row][o.col].color===t){i=!0;break}a.push(JSON.parse(JSON.stringify(o))),o.row+=c*n[r][0],o.col+=c*n[r][1]}i&&(l=l.concat(a))}return l.length<=1&&(l=[]),l},ne=function(){var e,t,n=JSON.parse(JSON.stringify(I));0===(e=1,t=2,e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)%2)&&(n=[I[1],I[0],I[3],I[2]],w([m[1],m[0]]),J(n)),B(O(g,n)),r(!0)};Object(l.useEffect)((function(){if(null!==L){W(function(){for(var e=[0,0],t=0;t<L.length;t++)for(var n=0;n<L[t].length;n++)for(var l=0;l<I.length;l++)if(L[t][n].color===I[l]){e[l%2]+=Math.pow(L[t][n].value,2);break}return e}());var e=$(I[F%4]);0==e?(e=$(I[(F+1)%4]),H(e),le()):H(e)}}),[L,F]);var le=function e(){!function(){for(var e=0;e<L.length;e++)for(var t=0;t<L[e].length;t++)if(null===L[e][t].color)return!1;return!0}()?0!=G?D(F+1):e():re()},re=function(){h(!0),X(!0)};return Object(i.jsx)("div",{children:n?Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:"player1Info playerInfo"+(F%2===0?" turnPlayer":""),children:[Object(i.jsx)("div",{className:"infoStoneFrame",children:Object(i.jsx)(s,{className:"infoStone",color:F%2===0?I[(0+F)%4]:I[(F-1+0)%4],value:null})}),Object(i.jsx)("div",{className:"nextInfoStoneFrame",children:Object(i.jsx)(s,{className:"infoStone",color:F%2===0?I[(2+F)%4]:I[(F-1+2)%4],value:null})}),Object(i.jsx)("div",{className:"playerInfoName",children:Object(i.jsx)("span",{children:m[0]})}),Object(i.jsx)("div",{className:"playerInfoPoint",children:R[0]})]}),Object(i.jsxs)("div",{className:"player2Info playerInfo"+(F%2!==0?" turnPlayer":""),children:[Object(i.jsx)("div",{className:"infoStoneFrame",children:Object(i.jsx)(s,{className:"infoStone",color:F%2===0?I[(1+F)%4]:I[(F-1+1)%4],value:null})}),Object(i.jsx)("div",{className:"nextInfoStoneFrame",children:Object(i.jsx)(s,{className:"infoStone",color:F%2===0?I[(3+F)%4]:I[(F-1+3)%4],value:null})}),Object(i.jsx)("div",{className:"playerInfoName",children:Object(i.jsx)("span",{children:m[1]})}),Object(i.jsx)("div",{className:"playerInfoPoint",children:R[1]})]}),Object(i.jsx)(j,{data:L,size:g,setStone:u?function(){}:function(e){if(null===L[e.row][e.col].color){var t=te(e,I[F%4]);if(0!=t){var n=L.slice();n=function(e,t,n){var l=e.slice();return t.forEach((function(e){if(l[e.row][e.col].color!==n){if(null===l[e.row][e.col].color)return l=_(l,e,n),l=ee(l,e,1);for(var t=null,r=0;r<I.length;r++)l[e.row][e.col].color===I[r]&&(t=r);null!==t&&(F%2===t%2?(l=_(l,e,n),l=ee(l,e,1)):l=l[e.row][e.col].value>=2?ee(l,e,-1):_(l,e,n))}})),l}(n,t,I[F%4]),B(n),le()}}},settablePositions:G}),u?Object(i.jsx)("div",{className:"resultOpenButton",onClick:function(){return X(!0)},children:"result"}):null,Object(i.jsx)(b,{visible:V,closeDialog:function(){return X(!1)},children:Object(i.jsxs)("div",{className:"resultDialog",children:[Object(i.jsx)("div",{className:"resultTitle",children:R[0]===R[1]?"Draw!":(R[0]>R[1]?m[0]:m[1])+" Win!"}),Object(i.jsxs)("div",{className:"resultPoints",children:[R[0]," \u5bfe ",R[1]]}),Object(i.jsx)("div",{children:Object(i.jsx)(v.a,{url:"https://reversi.fazerog02.dev",title:R[0]-R[1]===0?"4\u8272\u30ea\u30d0\u30fc\u30b7\u3067\u5f15\u304d\u5206\u3051\u307e\u3057\u305f\uff01":"".concat(Math.abs(R[0]-R[1]),"\u70b9\u5dee\u30674\u8272\u30ea\u30d0\u30fc\u30b7\u3067\u52dd\u5229\u3057\u307e\u3057\u305f\uff01"),children:Object(i.jsx)(d.a,{size:64,round:!0})})})]})})]}):Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{style:{display:"inline-block"},children:[Object(i.jsx)("input",{name:"player0",type:"text",value:m[0],onChange:function(e){return Z(e)}}),Object(i.jsx)("p",{children:"\u82721"}),Object(i.jsx)(f,{defaultColor:I[0],setState:function(e){I.includes(e)||Y(e,0)}}),Object(i.jsx)("p",{children:"\u82722"}),Object(i.jsx)(f,{defaultColor:I[2],setState:function(e){I.includes(e)||Y(e,2)}})]}),Object(i.jsxs)("div",{style:{display:"inline-block"},children:[Object(i.jsx)("input",{name:"player1",type:"text",value:m[1],onChange:function(e){return Z(e)}}),Object(i.jsx)("p",{children:"\u82721"}),Object(i.jsx)(f,{defaultColor:I[1],setState:function(e){I.includes(e)||Y(e,1)}}),Object(i.jsx)("p",{children:"\u82722"}),Object(i.jsx)(f,{defaultColor:I[3],setState:function(e){I.includes(e)||Y(e,3)}})]}),Object(i.jsx)("button",{style:{display:"block"},type:"button",onClick:function(){return ne()},children:"start"})]})})}var x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,l=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),l(e),r(e),c(e),o(e)}))};o.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(h,{})}),document.getElementById("root")),x()},3:function(e,t,n){}},[[13,1,2]]]);
//# sourceMappingURL=main.26a4b323.chunk.js.map