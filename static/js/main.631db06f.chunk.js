(this["webpackJsonpdouble-color-reversi"]=this["webpackJsonpdouble-color-reversi"]||[]).push([[0],{11:function(e,t,r){},12:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(1),o=r.n(c),l=r(5),a=r.n(l),i=(r(11),r(2));r(4);function s(e){var t=function(){if(null===e.color)return null;var t,r=e.value<=1?null:Object(n.jsx)("span",{style:{color:(t=e.color,"#"!==t[0]||(299*parseInt(t.substr(1,2),16)+587*parseInt(t.substr(3,2),16)+114*parseInt(t.substr(5,2),16))/1e3<128?"white":"black")},children:"+"+(e.value-1).toString()});return Object(n.jsx)("div",{className:"stoneElement",style:{background:e.color},children:r})}();return Object(n.jsx)("div",{style:{width:e.size,height:e.size,border:"1px solid black",backgroundColor:e.isSettable?"#ffa399":"transparent"},onClick:function(){return e.onClick()},children:t})}function u(e){var t=function(t,r){for(var c,o=!1,l=0;l<e.settablePositions.length;l++)if(e.settablePositions[l].row===t.row&&e.settablePositions[l].col===t.col){o=!0;break}return c=null===r.color&&o?function(){return e.setStone(t)}:function(){},Object(n.jsx)(s,{size:(80/e.size).toString()+"vmin",color:r.color,value:r.value,isSettable:o,onClick:c},t.row.toString()+t.col.toString())},r=function(r){for(var c=[],o=0;o<e.size;o++){var l=t({row:r,col:o},e.data[r][o]);c.push(l)}return Object(n.jsx)("div",{className:"fieldLine",children:c},r.toString())},c=function(){for(var t=[],c=0;c<e.size;c++)t.push(r(c));return Object(n.jsx)("div",{className:"field",children:t})}();return Object(n.jsx)("div",{className:"fieldWrapper",children:c})}function j(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)("input",{type:"color",onChange:function(t){return function(t){e.setState(t.target.value)}(t)}}),Object(n.jsx)("input",{type:"file",accept:"image/*",onChange:function(t){return function(t){var r=t.target.files[0],n=new FileReader;n.addEventListener("load",(function(){e.setState("url(".concat(n.result,")"))})),n.readAsDataURL(r)}(t)}})]})}var f=function(e,t){var r=function(e){return JSON.parse(JSON.stringify(Array(e).fill(Array(e).fill({color:null,value:0}))))}(e),n=e/2-2,c=e/2-2;return r[n][c]={color:t[0],value:1},r[n][c+1]={color:t[1],value:1},r[n][c+2]={color:t[2],value:1},r[n][c+3]={color:t[3],value:1},r[n+1][c]={color:t[1],value:1},r[n+1][c+1]={color:t[0],value:1},r[n+1][c+2]={color:t[3],value:1},r[n+1][c+3]={color:t[2],value:1},r[n+2][c]={color:t[2],value:1},r[n+2][c+1]={color:t[3],value:1},r[n+2][c+2]={color:t[0],value:1},r[n+2][c+3]={color:t[1],value:1},r[n+3][c]={color:t[3],value:1},r[n+3][c+1]={color:t[2],value:1},r[n+3][c+2]={color:t[1],value:1},r[n+3][c+3]={color:t[0],value:1},r};function b(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),r=t[0],o=t[1],l=Object(c.useState)(!1),a=Object(i.a)(l,2),s=a[0],b=a[1],v=Object(c.useState)(10),d=Object(i.a)(v,2),O=d[0],h=d[1],p=Object(c.useState)(["player1","player2"]),x=Object(i.a)(p,2),g=x[0],S=x[1],y=Object(c.useState)(["black","red","blue","green"]),w=Object(i.a)(y,2),N=w[0],k=w[1],m=Object(c.useState)(0),C=Object(i.a)(m,2),J=C[0],z=C[1],I=Object(c.useState)(null),P=Object(i.a)(I,2),E=P[0],F=P[1],L=Object(c.useState)([0,0]),M=Object(i.a)(L,2),A=M[0],T=M[1],B=Object(c.useState)([]),D=Object(i.a)(B,2),R=D[0],U=D[1],W=function(e,t){var r=JSON.parse(JSON.stringify(N));r[t]=e,k(r)},q=function(e){switch(e.target.name){case"player0":S([e.target.value,g[1]]);break;case"player1":var t=parseInt(e.target.value);"size"!==g[0]||isNaN(t)||t>=4&&t<=100&&h(t),S([g[0],e.target.value])}},G=function(e){for(var t=[],r=0;r<O;r++)for(var n=0;n<O;n++){var c={row:r,col:n};null===E[c.row][c.col].color&&0!=Q(c,e)&&t.push(c)}return t},H=function(e,t,r){var n=e.slice(),c=n[t.row][t.col];return c.color=r,n[t.row][t.col]=c,n},K=function(e,t,r){var n=e.slice(),c=n[t.row][t.col];return c.value=c.value+r,n[t.row][t.col]=c,n},Q=function(e,t){for(var r=[[1,0],[0,1],[1,1],[-1,1]],n=[JSON.parse(JSON.stringify(e))],c=0;c<r.length;c++)for(var o=-1;o<=1;o+=2){var l=JSON.parse(JSON.stringify(e)),a=[],i=!1;for(l.row+=o*r[c][0],l.col+=o*r[c][1];l.row>=0&&l.row<O&&l.col>=0&&l.col<O&&null!==E[l.row][l.col].color;){if(E[l.row][l.col].color===t){i=!0;break}a.push(JSON.parse(JSON.stringify(l))),l.row+=o*r[c][0],l.col+=o*r[c][1]}i&&(n=n.concat(a))}return n.length<=1&&(n=[]),n},V=function(){F(f(O,N)),S(function(e){for(var t=(e=e.slice()).length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}(g)),o(!0)};Object(c.useEffect)((function(){if(null!==E){T(function(){for(var e=[0,0],t=0;t<E.length;t++)for(var r=0;r<E[t].length;r++)for(var n=0;n<N.length;n++)if(E[t][r].color===N[n]){e[n%2]+=Math.pow(E[t][r].value,2);break}return e}());var e=G(N[J%4]);0==e?(console.log("pass"),e=G(N[(J+1)%4]),U(e),X()):U(e)}}),[E]);var X=function e(){if(!function(){for(var e=0;e<E.length;e++)for(var t=0;t<E[e].length;t++)if(null===E[e][t].color)return!1;return!0}())return 0==U?(console.log("pass"),void e()):void z(J+1);Y()},Y=function(){b(!0)};return Object(n.jsx)("div",{children:r?Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("span",{children:[g[0],": ",Object(n.jsx)("span",{style:{color:N[0]},children:N[0]}),", ",Object(n.jsx)("span",{style:{color:N[2]},children:N[2]}),"\u3000"]}),Object(n.jsxs)("span",{children:[g[1],": ",Object(n.jsx)("span",{style:{color:N[1]},children:N[1]}),", ",Object(n.jsx)("span",{style:{color:N[3]},children:N[3]})]})]}),Object(n.jsxs)("span",{children:["turn: ",Object(n.jsx)("span",{style:{color:N[J%4]},children:N[J%4]}),"\u3000"]}),Object(n.jsxs)("span",{children:[g[0],": ",A[0],"\u3000"]}),Object(n.jsxs)("span",{children:[g[1],": ",A[1]]}),Object(n.jsx)(u,{data:E,size:O,setStone:s?function(){}:function(e){if(null===E[e.row][e.col].color){var t=Q(e,N[J%4]);if(0!=t){var r=E.slice();r=function(e,t,r){var n=e.slice();return t.forEach((function(e){if(n[e.row][e.col].color!==r){if(null===n[e.row][e.col].color)return n=H(n,e,r),n=K(n,e,1);for(var t=null,c=0;c<N.length;c++)n[e.row][e.col].color===N[c]&&(t=c);null!==t&&(J%2===t%2?(n=H(n,e,r),n=K(n,e,1)):n=n[e.row][e.col].value>=2?K(n,e,-1):H(n,e,r))}})),n}(r,t,N[J%4]),F(r),X()}}},settablePositions:R})]}),Object(n.jsx)("div",{className:"fadeTrans fullScreen",style:{visibility:s?"visible":"hidden",opacity:s?1:0},children:"end"})]}):Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("input",{name:"player0",type:"text",value:g[0],onChange:function(e){return q(e)}}),Object(n.jsx)("p",{children:"\u82721"}),Object(n.jsx)(j,{setState:function(e){N.includes(e)||W(e,0)}}),Object(n.jsx)("p",{children:"\u82722"}),Object(n.jsx)(j,{setState:function(e){N.includes(e)||W(e,2)}})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("input",{name:"player1",type:"text",value:g[1],onChange:function(e){return q(e)}}),Object(n.jsx)("p",{children:"\u82721"}),Object(n.jsx)(j,{setState:function(e){N.includes(e)||W(e,1)}}),Object(n.jsx)("p",{children:"\u82722"}),Object(n.jsx)(j,{setState:function(e){N.includes(e)||W(e,3)}})]}),Object(n.jsx)("button",{type:"button",onClick:function(){return V()},children:"start"})]})})}var v=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,13)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,l=t.getTTFB;r(e),n(e),c(e),o(e),l(e)}))};a.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(b,{})}),document.getElementById("root")),v()},4:function(e,t,r){}},[[12,1,2]]]);
//# sourceMappingURL=main.631db06f.chunk.js.map