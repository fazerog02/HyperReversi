(this["webpackJsonpdouble-color-reversi"]=this["webpackJsonpdouble-color-reversi"]||[]).push([[0],{11:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1),l=n.n(o),c=n(5),a=n.n(c),i=(n(11),n(2));n(4);function s(e){return Object(r.jsx)("div",{className:"stoneElement ".concat(e.className),style:{background:e.color},children:e.value})}function u(e){var t=function(){if(null===e.color)return null;var t,n=e.value<=1?null:Object(r.jsx)("span",{style:{color:(t=e.color,"#"!==t[0]||(299*parseInt(t.substr(1,2),16)+587*parseInt(t.substr(3,2),16)+114*parseInt(t.substr(5,2),16))/1e3<128?"white":"black")},children:"+"+(e.value-1).toString()});return Object(r.jsx)(s,{color:e.color,value:n})}();return Object(r.jsx)("div",{style:{width:e.size,height:e.size,backgroundColor:e.isSettable?"#ffa399":"transparent"},className:"stoneFrame",onClick:function(){return e.onClick()},children:t})}function f(e){var t=function(t,n){for(var o,l=!1,c=0;c<e.settablePositions.length;c++)if(e.settablePositions[c].row===t.row&&e.settablePositions[c].col===t.col){l=!0;break}return o=null===n.color&&l?function(){return e.setStone(t)}:function(){},Object(r.jsx)(u,{size:(80/e.size).toString()+"vmin",color:n.color,value:n.value,isSettable:l,onClick:o},t.row.toString()+t.col.toString())},n=function(n){for(var o=[],l=0;l<e.size;l++){var c=t({row:n,col:l},e.data[n][l]);o.push(c)}return Object(r.jsx)("div",{className:"fieldLine",children:o},n.toString())},o=function(){for(var t=[],o=0;o<e.size;o++)t.push(n(o));return Object(r.jsx)("div",{className:"field",children:t})}();return Object(r.jsx)("div",{className:"fieldWrapper",children:o})}function j(e){return Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{type:"color",value:e.defaultColor,onChange:function(t){return function(t){e.setState(t.target.value)}(t)}}),Object(r.jsx)("input",{type:"file",accept:"image/*",onChange:function(t){return function(t){var n=t.target.files[0],r=new FileReader;r.addEventListener("load",(function(){e.setState("url(".concat(r.result,")"))})),r.readAsDataURL(n)}(t)}})]})}var v=function(e,t){var n=function(e){return JSON.parse(JSON.stringify(Array(e).fill(Array(e).fill({color:null,value:0}))))}(e),r=e/2-2,o=e/2-2;return n[r][o]={color:t[0],value:1},n[r][o+1]={color:t[1],value:1},n[r][o+2]={color:t[2],value:1},n[r][o+3]={color:t[3],value:1},n[r+1][o]={color:t[1],value:1},n[r+1][o+1]={color:t[0],value:1},n[r+1][o+2]={color:t[3],value:1},n[r+1][o+3]={color:t[2],value:1},n[r+2][o]={color:t[2],value:1},n[r+2][o+1]={color:t[3],value:1},n[r+2][o+2]={color:t[0],value:1},n[r+2][o+3]={color:t[1],value:1},n[r+3][o]={color:t[3],value:1},n[r+3][o+1]={color:t[2],value:1},n[r+3][o+2]={color:t[1],value:1},n[r+3][o+3]={color:t[0],value:1},n};function b(){var e=Object(o.useState)(!1),t=Object(i.a)(e,2),n=t[0],l=t[1],c=Object(o.useState)(!1),a=Object(i.a)(c,2),u=a[0],b=a[1],d=Object(o.useState)(10),O=Object(i.a)(d,2),h=O[0],p=O[1],x=Object(o.useState)(["player1","player2"]),S=Object(i.a)(x,2),g=S[0],y=S[1],m=Object(o.useState)(["#000000","#ff0000","#0000ff","#008000"]),N=Object(i.a)(m,2),w=N[0],C=N[1],k=Object(o.useState)(0),I=Object(i.a)(k,2),J=I[0],F=I[1],P=Object(o.useState)(null),z=Object(i.a)(P,2),M=z[0],E=z[1],L=Object(o.useState)([0,0]),A=Object(i.a)(L,2),T=A[0],B=A[1],D=Object(o.useState)([]),R=Object(i.a)(D,2),U=R[0],W=R[1],q=function(e,t){var n=JSON.parse(JSON.stringify(w));n[t]=e,C(n)},G=function(e){switch(e.target.name){case"player0":y([e.target.value,g[1]]);break;case"player1":var t=parseInt(e.target.value);"size"!==g[0]||isNaN(t)||t>=4&&t<=100&&p(t),y([g[0],e.target.value])}},H=function(e){for(var t=[],n=0;n<h;n++)for(var r=0;r<h;r++){var o={row:n,col:r};null===M[o.row][o.col].color&&0!=V(o,e)&&t.push(o)}return t},K=function(e,t,n){var r=e.slice(),o=r[t.row][t.col];return o.color=n,r[t.row][t.col]=o,r},Q=function(e,t,n){var r=e.slice(),o=r[t.row][t.col];return o.value=o.value+n,r[t.row][t.col]=o,r},V=function(e,t){for(var n=[[1,0],[0,1],[1,1],[-1,1]],r=[JSON.parse(JSON.stringify(e))],o=0;o<n.length;o++)for(var l=-1;l<=1;l+=2){var c=JSON.parse(JSON.stringify(e)),a=[],i=!1;for(c.row+=l*n[o][0],c.col+=l*n[o][1];c.row>=0&&c.row<h&&c.col>=0&&c.col<h&&null!==M[c.row][c.col].color;){if(M[c.row][c.col].color===t){i=!0;break}a.push(JSON.parse(JSON.stringify(c))),c.row+=l*n[o][0],c.col+=l*n[o][1]}i&&(r=r.concat(a))}return r.length<=1&&(r=[]),r},X=function(){var e,t;E(v(h,w)),0===(e=1,t=2,e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)%2)&&(y([g[1],g[0]]),C([w[1],w[0],w[3],w[2]])),l(!0)};Object(o.useEffect)((function(){if(null!==M){B(function(){for(var e=[0,0],t=0;t<M.length;t++)for(var n=0;n<M[t].length;n++)for(var r=0;r<w.length;r++)if(M[t][n].color===w[r]){e[r%2]+=Math.pow(M[t][n].value,2);break}return e}());var e=H(w[J%4]);0==e?(console.log("pass"),e=H(w[(J+1)%4]),W(e),Y()):W(e)}}),[M]);var Y=function e(){if(!function(){for(var e=0;e<M.length;e++)for(var t=0;t<M[e].length;t++)if(null===M[e][t].color)return!1;return!0}())return 0==W?(console.log("pass"),void e()):void F(J+1);Z()},Z=function(){b(!0)};return Object(r.jsx)("div",{children:n?Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{className:"player1Info playerInfo"+(J%2===0?" turnPlayer":""),children:[Object(r.jsx)("div",{className:"infoStoneFrame",children:Object(r.jsx)(s,{className:"infoStone",color:J%2===0?w[(0+J)%4]:w[(J-1+0)%4],value:null})}),Object(r.jsx)("div",{className:"nextInfoStoneFrame",children:Object(r.jsx)(s,{className:"infoStone",color:J%2===0?w[(2+J)%4]:w[(J-1+2)%4],value:null})}),Object(r.jsx)("div",{className:"playerInfoName",children:g[0]}),Object(r.jsx)("div",{className:"playerInfoPoint",children:T[0]})]}),Object(r.jsxs)("div",{className:"player2Info playerInfo"+(J%2!==0?" turnPlayer":""),children:[Object(r.jsx)("div",{className:"infoStoneFrame",children:Object(r.jsx)(s,{className:"infoStone",color:J%2===0?w[(1+J)%4]:w[(J-1+1)%4],value:null})}),Object(r.jsx)("div",{className:"nextInfoStoneFrame",children:Object(r.jsx)(s,{className:"infoStone",color:J%2===0?w[(3+J)%4]:w[(J-1+3)%4],value:null})}),Object(r.jsx)("div",{className:"playerInfoName",children:g[1]}),Object(r.jsx)("div",{className:"playerInfoPoint",children:T[1]})]}),Object(r.jsx)(f,{data:M,size:h,setStone:u?function(){}:function(e){if(null===M[e.row][e.col].color){var t=V(e,w[J%4]);if(0!=t){var n=M.slice();n=function(e,t,n){var r=e.slice();return t.forEach((function(e){if(r[e.row][e.col].color!==n){if(null===r[e.row][e.col].color)return r=K(r,e,n),r=Q(r,e,1);for(var t=null,o=0;o<w.length;o++)r[e.row][e.col].color===w[o]&&(t=o);null!==t&&(J%2===t%2?(r=K(r,e,n),r=Q(r,e,1)):r=r[e.row][e.col].value>=2?Q(r,e,-1):K(r,e,n))}})),r}(n,t,w[J%4]),E(n),console.log(JSON.stringify({field:n})),Y()}}},settablePositions:U}),Object(r.jsx)("div",{className:"fadeTrans fullScreen",style:{visibility:u?"visible":"hidden",opacity:u?1:0},children:"end"})]}):Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{style:{display:"inline-block"},children:[Object(r.jsx)("input",{name:"player0",type:"text",value:g[0],onChange:function(e){return G(e)}}),Object(r.jsx)("p",{children:"\u82721"}),Object(r.jsx)(j,{defaultColor:w[0],setState:function(e){w.includes(e)||q(e,0)}}),Object(r.jsx)("p",{children:"\u82722"}),Object(r.jsx)(j,{defaultColor:w[2],setState:function(e){w.includes(e)||q(e,2)}})]}),Object(r.jsxs)("div",{style:{display:"inline-block"},children:[Object(r.jsx)("input",{name:"player1",type:"text",value:g[1],onChange:function(e){return G(e)}}),Object(r.jsx)("p",{children:"\u82721"}),Object(r.jsx)(j,{defaultColor:w[1],setState:function(e){w.includes(e)||q(e,1)}}),Object(r.jsx)("p",{children:"\u82722"}),Object(r.jsx)(j,{defaultColor:w[3],setState:function(e){w.includes(e)||q(e,3)}})]}),Object(r.jsx)("button",{style:{display:"block"},type:"button",onClick:function(){return X()},children:"start"})]})})}var d=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,13)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,l=t.getLCP,c=t.getTTFB;n(e),r(e),o(e),l(e),c(e)}))};a.a.render(Object(r.jsx)(l.a.StrictMode,{children:Object(r.jsx)(b,{})}),document.getElementById("root")),d()},4:function(e,t,n){}},[[12,1,2]]]);
//# sourceMappingURL=main.9bf2c787.chunk.js.map